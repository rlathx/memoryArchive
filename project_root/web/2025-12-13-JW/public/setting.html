<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Memory Archive | 설정</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
    <link rel="stylesheet" href="setting_style.css" />
</head>

<body>
    <div class="settings-card">
        <h1><i class="bi bi-sliders"></i> 설정</h1>

        <!-- MBTI -->
        <div class="mb-3">
            <label for="mbtiSelect" class="form-label">MBTI 선택</label>
            <select id="mbtiSelect" class="form-select">
                <option value="" selected>선택하세요</option>
                <option>INTJ</option>
                <option>INTP</option>
                <option>ENTJ</option>
                <option>ENTP</option>
                <option>INFJ</option>
                <option>INFP</option>
                <option>ENFJ</option>
                <option>ENFP</option>
                <option>ISTJ</option>
                <option>ISFJ</option>
                <option>ESTJ</option>
                <option>ESFJ</option>
                <option>ISTP</option>
                <option>ISFP</option>
                <option>ESTP</option>
                <option>ESFP</option>
            </select>
        </div>

        <div class="sep"></div>

        <!-- 하루에 받을 질문 개수 -->
        <div class="mb-3">
            <label for="questionCount" class="form-label">하루에 받을 질문 개수</label>
            <select id="questionCount" class="form-select">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3" selected>3 (기본)</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
            </select>
            <div class="form-text">
                하루에 몇 개의 질문을 받을지 선택하세요. 질문 3개가 기본 설정입니다.
            </div>
        </div>

        <hr>

        <h5>질문 종류별 개수 설정</h5>
        <div class="mb-2">
            <label>기본 질문 개수</label>
            <select id="countBasic" class="form-select">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
            </select>
        </div>

        <div class="mb-2">
            <label>MBTI 질문 개수</label>
            <select id="countMbti" class="form-select">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
            </select>
        </div>

        <div class="mb-2">
            <label>사용자 질문 개수</label>
            <select id="countCustom" class="form-select">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
            </select>
        </div>

        <p class="text-muted mt-2">
            ※ MBTI + 기본 + 사용자 질문 개수의 합은 “하루 질문 개수”와 같아야 합니다.
        </p>

        <!-- 질문 개수 오류 메시지 -->
        <div id="questionCountError" class="text-danger mt-2" style="display:none;">
            질문 개수 설정이 올바르지 않습니다.
        </div>

        <!-- 사용자 정의 질문 -->
        <div class="mb-3" id="customQsWrap">
            <label class="form-label">나만의 질문 추가</label>
            <div class="input-group mb-2">
                <input type="text" id="myQInput" class="form-control" placeholder="질문을 입력하고 ‘추가’ 버튼을 눌러주세요" />
                <button class="btn btn-outline-primary" id="btnAddMyQ">
                    <i class="bi bi-plus-lg"></i> 추가
                </button>
            </div>
            <ul class="list-group" id="myQList"></ul>
            <div class="hint mt-1">이곳에 추가한 질문은 '사용자 질문 개수' 설정에 따라 일기에 등장합니다.</div>
        </div>

        <div class="sep"></div>

        <!-- 오늘의 한마디 -->
        <div class="mb-3">
            <label for="quoteMode" class="form-label">오늘의 한마디 설정</label>
            <select id="quoteMode" class="form-select">
                <option value="quote">명언(랜덤)</option>
                <option value="mbti">MBTI별 맞춤 한마디</option>
            </select>
            <div class="form-text">선택한 방식이 메인/일기 페이지의 ‘오늘의 한마디’에 적용됩니다.</div>
        </div>

        <div class="sep"></div>

        <!-- 데이터 백업 / 복원 -->
        <div class="mb-3">
            <label class="form-label">데이터 백업 / 복원</label>
            <p class="form-text mb-2">
                현재 브라우저에 저장된 <strong>일기·기분·날씨·설정</strong> 데이터를
                한 번에 백업하거나, 백업 파일에서 복원할 수 있습니다.
            </p>
            <div class="btn-row mb-2">
                <button class="btn btn-outline-secondary" id="btnExport">
                    <i class="bi bi-download"></i> 백업 다운로드
                </button>
                <button class="btn btn-outline-secondary" id="btnImport">
                    <i class="bi bi-upload"></i> 백업에서 복원
                </button>
            </div>
            <input type="file" id="backupFile" accept="application/json" style="display:none;" />
            <div class="hint">
                복원 시 현재 저장된 <span class="text-danger">Memory Archive 데이터(ma_*)는 모두 덮어쓰기</span> 됩니다.
            </div>
        </div>

        <div class="sep"></div>

        <!-- 🔥 데이터 초기화 -->
        <div class="mb-3">
            <label class="form-label text-danger">데이터 초기화</label>
            <p class="form-text mb-2 text-danger">
                모든 <strong>Memory Archive 데이터(ma_* : 일기, 기분, 날씨, 설정, 사용자 정의 질문 등)</strong>를
                한 번에 삭제합니다. 되돌릴 수 없으니 주의하세요.
            </p>
            <button class="btn btn-outline-danger" id="btnReset">
                <i class="bi bi-trash"></i> 전체 데이터 초기화
            </button>
        </div>

        <div class="sep"></div>

        <!-- 저장 & 돌아가기 -->
        <div class="d-flex align-items-center gap-2">
            <button class="btn btn-primary" id="btnSave">저장</button>
            <span class="badge bg-success ok-badge" id="savedOk">
                <i class="bi bi-check2"></i>&nbsp;저장됨
            </span>
            <a href="index.html" class="btn btn-outline-secondary ms-auto">
                <i class="bi bi-arrow-left"></i> 메인으로
            </a>
        </div>
    </div>

    <script defer src="setting.js"></script>
</body>

</html>